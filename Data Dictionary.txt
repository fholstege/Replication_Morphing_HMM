#################################################################################################################
#                                        Morphing Consumer Dynamics                                   

#                                             Data Dictionary
# 
# This file contains a description of the main variables and data structures used in the simulation

#  Developed by Gui Liberali (Erasmus)  and Alina Ferecatu



This data dictionary has five sections:

0. Experimental design of study 2 - that generated the data
1. Variables loaded from the RCT data
2. Hard-wired parameters
3. Estimates computed during the simulation
4. Data structures and main variables, in the order they first appear in the code
5. Data structures exported as .csv files at the end of the simulation

Here are the details.

0. Experimental design study 2
Condition 1 is morph 1 followed by morph 1 (m1m1)
Condition 2 is morph 1 followed by morph 2 (m1m2)
Condition 3 is morph 2 followed by morph 1 (m2m1)
Condition 4 is morph 2 followed by morph 2 (m2m2). 



1. Trial variables loaded from the RCT data.

  EMPIRICAL_SETTING: whether the simulation is about the phone store or the MBA website

  MODEL: the model being run at a specific moment. Possible values:  MAB, MAB with our DP, HULB and random

  BENCHMARK: the state estimation benchmark being run at the moment. Possible values: test1 (HMM) and test2 (state defined by adding phone to product comparison or trolley)  

  TERMINAL: whether the last state is terminal or not.

  HMM_MODEL: the HMM model being used to estimate the HMM parameters we use to update states membership.               

  TRANSITION_COVARIATES: whether the model is using covariates or not

  QS_ARRIVAL:  initial estimate of state of everyone

  QS_ARRIVAL_NATURE: actual initial state of everyone arriving on the website



2. Hard-wired parameters.

  MORPHING_OPPORTUNITY:  Set to 7 clicks. This is the click number that the algorithm website is allowed to change morphs.

  TOT_VISITORS: set to 40000

  TOT_MORPHS: set to 2 (often referred to as abstract and concrete)

  TOT_STATES: Set to 2.

  K_FULL: length of the clickstream


3. Raw clickstream variables

- outcome[0]: marks a purchase or no-purchase
   0: by default
   1: when the person left the website with a phone in the trolley


- outcome[3]: flags the visitor left the website
   0: by default
   1: when the visitor left the website by clicking on the proceed to survey at any page. This can happen via trolley (buying or not) or by abandoning the site (at other pages)
empty when



4. Estimates computed during the simulation

  true_states: the visitor actual state at every click, unobserved by the system

  qs_HULB: Visitor state estimated by HULB algorithm

  qs_HMM: Visitor state estimated by the dynamic states algorithm, which can be using the test1 (HMM) or test2 (defined by plan comparison page) heuristic.

  qs_HMM_sys_future: estimate of future states, used in the DP. In test1 this is HMM estimates. In test2 this is an estimate of when will the user visit the page that takes him to state 2.

  qs_HMM_nature: click-specific HMM probability of a person being on a specific state. Used to draw the state at every click. In test1 this is an HMM estimate; in test2 this is page-specific deterministic rule.

  lambda: HMM transition matrix


5. Data structures and main variables, in the order they first appear in the code.

  Ckjn: the website structure

  Omega: matrix used to learn states from clicks, mapping link characteristic to user state
 

  
6. Data structures exported as .csv files at the end of the simulation

    summary_sm: 

    delta_sm: 


 
